<!doctype html><html lang="es"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Archivo — Volar en pantalla</title>
<link rel="stylesheet" href="style.css">
<script defer src="state.js"></script>
</head><body>
<main class="wrap">
  <div class="card">
    <h1>Archivo (prototipo)</h1>
    <div class="actions">
      <a class="btn" href="index.html">← Volver</a>
      <button class="btn" id="clear"></button>
    </div>
    <div id="list" class="grid2" style="margin-top:16px"></div>
  </div>
</main>
<script>
const list = document.getElementById('list');
function render(){
  const all = JSON.parse(localStorage.getItem('volar_archive') || '[]');
  list.innerHTML='';
  if(!all.length){ list.innerHTML='<p>No hay aportes aún.</p>'; return }
  all.forEach(e=>{
    const el = document.createElement('div'); el.className='tile';
    el.innerHTML = `
      <header><strong>${new Date(e.t).toLocaleString()}</strong></header>
      <div class="content">
        <p><strong>Objeto cabeza:</strong> ${e.headText||'—'}</p>
        <div class="grid2">
          <div>${e.headImg? `<img src="${e.headImg}" alt="">` : '<div class="preview">sin imagen</div>'}</div>
          <div>${e.sndImg? `<img src="${e.sndImg}" alt="">` : '<div class="preview">sin imagen</div>'}</div>
        </div>
        <p style="opacity:.7"><strong> tu pie de foto?:</strong> ${e.ghost||'—'}</p>
        ${e.audio? `<audio controls src="${e.audio}"></audio>`:''}
      </div>`;
    list.appendChild(el);
  });
}
render();

document.getElementById('clear').addEventListener('click', ()=>{
  if(confirm('¿Vaciar archivo local?')){ localStorage.removeItem('volar_archive'); render(); }
});
</script>
</body></html>
